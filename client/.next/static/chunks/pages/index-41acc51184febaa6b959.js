(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{70857:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ke}});var n=r(27791),a=r(22951),s=r(91976),c=r(47169),o=r(67591),i=r(68513),l=r(27597),u=r(64649),d=r(57135),f=r.n(d),p=r(27378),h=r(71074),m=r(69732),v=r(85058),x=r(92664),w=r(94617),Z=r(16395),k=function(){var e=(0,n.Z)(f().mark((function e(){var t,r,n,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.D0)();case 2:return t=e.sent,e.next=5,(0,m.s8)(w);case 5:return r=e.sent,e.next=8,(0,m.s8)(x);case 8:return n=e.sent,e.next=11,n.getStakedBalance.call({from:t});case 11:return a=e.sent,e.next=14,(0,v.He)(r,a,4);case 14:return s=e.sent,e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,n.Z)(f().mark((function e(t){var r,a,s,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.D0)();case 2:return r=e.sent,e.next=5,(0,m.s8)(x);case 5:return a=e.sent,e.next=8,(0,m.s8)(w);case 8:return s=e.sent,e.next=11,(0,v.ij)(s,t);case 11:return c=e.sent,e.abrupt("return",new Promise(function(){var e=(0,n.Z)(f().mark((function e(t,n){var s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.depositAndStartStake(c,{from:r});case 3:s=e.sent,t(s),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,n.Z)(f().mark((function e(t){var r,a,s,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.D0)();case 2:return r=e.sent,e.next=5,(0,m.s8)(x);case 5:return a=e.sent,e.next=8,(0,m.s8)(w);case 8:return s=e.sent,e.next=11,(0,v.ij)(s,t);case 11:return c=e.sent,e.abrupt("return",new Promise(function(){var e=(0,n.Z)(f().mark((function e(t,n){var s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.endStakeAndWithdraw(c,{from:r});case 3:s=e.sent,t(s),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,n.Z)(f().mark((function e(){var t,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.D0)();case 2:return t=e.sent,e.next=5,(0,m.s8)(x);case 5:return r=e.sent,e.abrupt("return",new Promise(function(){var e=(0,n.Z)(f().mark((function e(n,a){var s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.claimReward({from:t});case 3:s=e.sent,n(s),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,n.Z)(f().mark((function e(){var t,r,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.s8)(x);case 2:return t=e.sent,e.next=5,(0,m.s8)(Z);case 5:return r=e.sent,e.next=8,(0,v.D0)();case 8:return a=e.sent,e.abrupt("return",new Promise(function(){var e=(0,n.Z)(f().mark((function e(n,s){var c,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getRewardsStats({from:a});case 3:return c=e.sent,e.next=6,(0,v.He)(r,c.claimableRewards,4);case 6:return e.t0=e.sent,e.next=9,(0,v.He)(r,c.rewardsPaid,4);case 9:return e.t1=e.sent,e.next=12,(0,v.He)(r,c.rewardRate,4);case 12:return e.t2=e.sent,e.next=15,(0,v.He)(r,c.totalRewardsPaid,4);case 15:e.t3=e.sent,o={claimableRewards:e.t0,rewardsPaid:e.t1,rewardRate:e.t2,totalRewardsPaid:e.t3},n(o),e.next=23;break;case 20:e.prev=20,e.t4=e.catch(0),s(e.t4);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,r){return e.apply(this,arguments)}}()));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=r(52721),R=r(19087),N=r(27949),g=r(67327),A=r(52125),O=r(25773),C=r(30808),E=r(17019),T=r.n(E),U=r(28398),M=r(66014),B=r(25284),I=p.createContext(null);I.displayName="CardContext";var _=I,D=["bsPrefix","className","variant","as"],L=p.forwardRef((function(e,t){var r=e.bsPrefix,n=e.className,a=e.variant,s=e.as,c=void 0===s?"img":s,o=(0,C.Z)(e,D),i=(0,U.vE)(r,"card-img");return p.createElement(c,(0,O.Z)({ref:t,className:T()(a?i+"-"+a:i,n)},o))}));L.displayName="CardImg",L.defaultProps={variant:null};var W=L,G=["bsPrefix","className","bg","text","border","body","children","as"],H=(0,B.Z)("h5"),X=(0,B.Z)("h6"),F=(0,M.Z)("card-body"),K=(0,M.Z)("card-title",{Component:H}),$=(0,M.Z)("card-subtitle",{Component:X}),q=(0,M.Z)("card-link",{Component:"a"}),z=(0,M.Z)("card-text",{Component:"p"}),J=(0,M.Z)("card-header"),Q=(0,M.Z)("card-footer"),V=(0,M.Z)("card-img-overlay"),Y=p.forwardRef((function(e,t){var r=e.bsPrefix,n=e.className,a=e.bg,s=e.text,c=e.border,o=e.body,i=e.children,l=e.as,u=void 0===l?"div":l,d=(0,C.Z)(e,G),f=(0,U.vE)(r,"card"),h=(0,p.useMemo)((function(){return{cardHeaderBsPrefix:f+"-header"}}),[f]);return p.createElement(_.Provider,{value:h},p.createElement(u,(0,O.Z)({ref:t},d,{className:T()(n,f,a&&"bg-"+a,s&&"text-"+s,c&&"border-"+c)}),o?p.createElement(F,null,i):i))}));Y.displayName="Card",Y.defaultProps={body:!1},Y.Img=W,Y.Title=K,Y.Subtitle=$,Y.Body=F,Y.Link=q,Y.Text=z,Y.Header=J,Y.Footer=Q,Y.ImgOverlay=V;var ee=Y,te=r(80754),re=r(53738),ne=r(57231),ae=r(87137),se=r(23907),ce=r(24246),oe=function(e){var t=e.title,r=e.value,n=e.symbol;return(0,ce.jsx)("div",{children:(0,ce.jsx)(te.Z,{className:"border border-primary",children:(0,ce.jsxs)(se.Z.Group,{as:re.Z,controlId:"lpTokenBalance",children:[(0,ce.jsx)(se.Z.Label,{column:!0,style:{minWidth:200},className:"text-start",children:t}),(0,ce.jsx)(ne.Z,{}),(0,ce.jsxs)(se.Z.Label,{column:!0,style:{minWidth:200},className:"text-end",children:[r," ",n]})]})})})},ie=function(e){var t=e.rewardRate,r=e.totalRewardsPaid;return(0,ce.jsxs)(te.Z,{className:"border border-primary",children:[(0,ce.jsxs)(se.Z.Group,{as:re.Z,controlId:"rewardRate",children:[(0,ce.jsx)(se.Z.Label,{column:!0,style:{minWidth:250},className:"text-start",children:"Rewards Rate"}),(0,ce.jsx)(ne.Z,{}),(0,ce.jsxs)(se.Z.Label,{column:!0,style:{minWidth:200},className:"text-end",children:[60*t*60*24," BIGPP / day"]})]}),(0,ce.jsxs)(se.Z.Group,{as:re.Z,controlId:"totalRewardsPaid",children:[(0,ce.jsx)(se.Z.Label,{column:!0,style:{minWidth:250},className:"text-start",children:"Total Rewards Paid"}),(0,ce.jsx)(ne.Z,{}),(0,ce.jsxs)(se.Z.Label,{column:!0,style:{minWidth:200},className:"text-end",children:[r," BIGPP"]})]})]})},le=r(75124);function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.Z)(this,r)}}var pe=function(e){(0,o.Z)(r,e);var t=fe(r);function r(e){var s;return(0,a.Z)(this,r),s=t.call(this,e),(0,u.Z)((0,c.Z)(s),"setAmount",(function(e){var t=Math.floor(Number(s.state.balance)*e)/100,r=!isNaN(t)&&t>0;s._isMounted&&s.setState({validAmount:r,amount:isNaN(t)?"":t.toString()})})),(0,u.Z)((0,c.Z)(s),"updateAmount",(function(e){var t=s.parseAmount(e.target.value),r=!isNaN(t)&&t>=0;s._isMounted&&(s.setState({validAmount:r,amount:e.target.value}),r&&s.checkAllowance(t).then((function(e){s._isMounted&&s.setState({sufficientAllowance:e})})))})),(0,u.Z)((0,c.Z)(s),"allowButtonPressed",(0,n.Z)(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Number(s.state.amount),e.next=3,(0,S.dE)(t).then((function(e){s._isMounted&&s.checkAllowance(t).then((function(e){s.setState({sufficientAllowance:e})}))}));case 3:case"end":return e.stop()}}),e)})))),(0,u.Z)((0,c.Z)(s),"checkAllowance",function(){var e=(0,n.Z)(f().mark((function e(t){var r,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,S.RC)();case 3:return r=e.sent,n=t<=r,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error checking allowance",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),(0,u.Z)((0,c.Z)(s),"submitForm",(function(){"stake"===s.state.formType?s.submitStake():"unstake"===s.state.formType&&s.submitUnstake()})),(0,u.Z)((0,c.Z)(s),"submitStake",(function(){var e=s.state,t=e.amount,r=e.sufficientAllowance,n=e.validAmount;if(r)if(n){var a=Number(t);y(a).then((function(e){s.props.handleSuccess("Stake increased. Transaction id: ".concat(e.tx))})).catch((function(e){console.log(">>> onSubmit startStake error:",e);var t=s.getStakeError(e);s.props.handleError(e,t)}))}else s.setState({error:"Invalid tolen amount"});else s.setState({error:"Insufficient token allowance"})})),(0,u.Z)((0,c.Z)(s),"submitUnstake",(function(){var e=s.state,t=e.amount;if(e.validAmount){var r=Number(t);j(r).then((function(e){s.props.handleSuccess("Stake decreased. Transaction id: ".concat(e.tx))})).catch((function(e){console.log(">>> submitUnstake endStake error:",e);var t=s.getStakeError(e);s.props.handleError(e,t)}))}else s.setState({error:"Invalid tolen amount"})})),(0,u.Z)((0,c.Z)(s),"getStakeError",(function(e){switch(!0){case e.message.includes("No active reward phase found"):return"No active reward phase found";case e.message.includes("Invalid reward amount"):return"Invalid reward amount";case e.message.includes("Invalid reward interval"):return"Invalid reward interval";default:return e.message}})),(0,u.Z)((0,c.Z)(s),"parseAmount",(function(e){return Math.floor(100*Number(e))/100})),s.state=de(de({},e),{},{amount:""}),s._isMounted=!1,s}return(0,s.Z)(r,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,r=t.formType,n=t.balance,a="stake"===r?"Stake":"unstake"===r?"Unstake":void 0;return a?(0,ce.jsxs)("div",{children:[(0,ce.jsx)("h3",{className:"text-center",children:a}),(0,ce.jsxs)(se.Z,{className:"p-4",children:[(0,ce.jsxs)(se.Z.Group,{row:!0,controlId:"stakeAmount",children:[(0,ce.jsxs)(se.Z.Label,{variant:"secondary",className:"w-100 text-end text-muted",children:["Balance: ",n]}),(0,ce.jsxs)(le.Z,{className:"mb-3",children:[(0,ce.jsx)(se.Z.Control,{type:"text",placeholder:"0.0",autoComplete:"off",value:this.state.amount,title:"balance not staked",onChange:function(t){return e.updateAmount(t)}}),(0,ce.jsx)(le.Z.Text,{children:" PulseX-LP "})]})]}),(0,ce.jsx)(te.Z,{children:(0,ce.jsxs)(re.Z,{children:[(0,ce.jsxs)(ne.Z,{className:"m-0 p-2",children:[" ",(0,ce.jsx)(ae.Z,{onClick:function(){return e.setAmount(25)},className:"w-100",variant:"outline-secondary",children:"25%"})," "]}),(0,ce.jsxs)(ne.Z,{className:"m-0 p-2",children:[" ",(0,ce.jsx)(ae.Z,{onClick:function(){return e.setAmount(50)},className:"w-100",variant:"outline-secondary",children:"50%"})," "]}),(0,ce.jsxs)(ne.Z,{className:"m-0 p-2",children:[" ",(0,ce.jsx)(ae.Z,{onClick:function(){return e.setAmount(75)},className:"w-100",variant:"outline-secondary",children:"75%"})," "]}),(0,ce.jsxs)(ne.Z,{className:"m-0 p-2",children:[" ",(0,ce.jsx)(ae.Z,{onClick:function(){return e.setAmount(100)},className:"w-100",variant:"outline-secondary",children:"Max"})," "]})]})}),(0,ce.jsxs)("div",{style:{textAlign:"center"},className:"mt-4",children:[this.state.validAmount&&!this.state.sufficientAllowance&&"stake"===this.state.formType&&(0,ce.jsx)(ae.Z,{name:"allow",type:"button",variant:"primary w-50",onClick:function(t){return e.allowButtonPressed()},className:"pl-2",children:"Approve LP token transfer"}),"\xa0\xa0\xa0",(0,ce.jsx)(ae.Z,{variant:"primary w-25",onClick:this.submitForm,disabled:!(this.state.validAmount&&("unstake"===this.state.formType||this.state.sufficientAllowance)),children:a}),(0,ce.jsx)("div",{className:"mt-2",children:"all valid ERC20 tokens must be approved first"})]})]})]}):(0,ce.jsx)("div",{children:"Error"})}}]),r}(p.Component),he=r(82990);function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.Z)(this,r)}}var we=function(e){(0,o.Z)(r,e);var t=xe(r);function r(e){var n;return(0,a.Z)(this,r),n=t.call(this,e),(0,u.Z)((0,c.Z)(n),"claimRewardPressed",(function(){b().then((function(e){n.props.handleSuccess("Reward claimed. Transaction id: ".concat(e.tx))})).catch((function(e){n.props.handleError(e)}))})),(0,u.Z)((0,c.Z)(n),"showUpdateStakeModalPreseed",(function(e){n.setState({showUpdateStakeModal:!0,formType:e})})),(0,u.Z)((0,c.Z)(n),"hideUpdateStakeModalPreseed",(function(){n.setState({showUpdateStakeModal:!1,formType:void 0})})),(0,u.Z)((0,c.Z)(n),"handleAllowanceUpdated",(function(){n.props.allowanceUpdated()})),(0,u.Z)((0,c.Z)(n),"handleSuccess",(function(){n.hideUpdateStakeModalPreseed(),n.props.handleSuccess()})),(0,u.Z)((0,c.Z)(n),"handleError",(function(){n.hideUpdateStakeModalPreseed(),n.props.handleError()})),n.state=ve(ve({},e),{},{showUpdateStakeModal:!1}),n}return(0,s.Z)(r,[{key:"componentDidUpdate",value:function(e){e.lpUnstaked===this.props.lpUnstaked&&e.lpStaked===this.props.lpStaked&&e.claimableRewards===this.props.claimableRewards&&e.rewardsPaid===this.props.rewardsPaid&&e.rewardRate===this.props.rewardRate&&e.totalRewardsPaid===this.props.totalRewardsPaid&&e.formType===this.props.formType&&e.rewardPeriod.totalStaked===this.props.rewardPeriod.totalStaked||this.setState({lpUnstaked:this.props.lpUnstaked,lpStaked:this.props.lpStaked,claimableRewards:this.props.claimableRewards,rewardsPaid:this.props.rewardsPaid,rewardRate:this.props.rewardRate,totalRewardsPaid:this.props.totalRewardsPaid,formType:this.props.formType,rewardPeriod:this.props.rewardPeriod})}},{key:"render",value:function(){var e=this,t=this.state,r=t.showUpdateStakeModal,n=t.formType,a=t.lpUnstaked,s=t.lpStaked,c=t.claimableRewards,o=t.rewardsPaid,i=t.rewardRate,l=t.totalRewardsPaid,u=s&&this.state.rewardPeriod.totalStaked>0?Math.round(1e4*s/this.state.rewardPeriod.totalStaked)/100:"0";return(0,ce.jsxs)("div",{children:[(0,ce.jsxs)(g.ny,{children:[(0,ce.jsxs)(ee,{style:{flex:1,minWidth:200,margin:10},children:[(0,ce.jsx)(ee.Title,{className:"p-2",children:"Total LP Tokens Staked"}),(0,ce.jsxs)(ee.Body,{children:[" ",this.state.rewardPeriod.totalStaked," ETB "]})]}),(0,ce.jsxs)(ee,{style:{flex:1,minWidth:200,margin:10},children:[(0,ce.jsx)(ee.Title,{className:"p-2",children:"My LP Tokens Staked"}),(0,ce.jsxs)(ee.Body,{children:[" ",s," "]})]}),(0,ce.jsxs)(ee,{style:{flex:1,minWidth:200,margin:10},children:[(0,ce.jsx)(ee.Title,{className:"p-2",children:"My pool share"}),(0,ce.jsxs)(ee.Body,{children:[" ",u,"%"]})]}),(0,ce.jsxs)(ee,{style:{flex:1,minWidth:200,margin:10},children:[(0,ce.jsx)(ee.Title,{className:"p-2",children:"My Rewards Received"}),(0,ce.jsxs)(ee.Body,{children:[o," ETB"]})]})]}),(0,ce.jsx)("div",{className:"mt-4"}),(0,ce.jsxs)(g.M5,{maxWidth:"500",children:[(0,ce.jsx)(oe,{title:"Balance not staked yet",value:a,symbol:"PulseX-LP"}),(0,ce.jsx)("div",{className:"mt-4"}),(0,ce.jsx)(te.Z,{children:(0,ce.jsxs)(re.Z,{children:[(0,ce.jsx)(ne.Z,{children:(0,ce.jsx)(ae.Z,{name:"stake",className:"w-100",variant:"primary",onClick:function(t){return e.showUpdateStakeModalPreseed("stake")},children:"Stake"})}),(0,ce.jsx)(ne.Z,{children:(0,ce.jsx)(ae.Z,{name:"unstake",className:"w-100",variant:"secondary",onClick:function(t){return e.showUpdateStakeModalPreseed("unstake")},children:"Unstake"})})]})}),(0,ce.jsx)("div",{className:"mt-4"}),(0,ce.jsx)(ie,{rewardRate:i,totalRewardsPaid:l}),(0,ce.jsx)("div",{className:"mt-4"}),(0,ce.jsx)(oe,{title:"Claimable rewards",value:c,symbol:"BIGPP"}),(0,ce.jsx)("div",{className:"mt-2"}),(0,ce.jsx)("div",{className:"d-grid gap-2",children:(0,ce.jsx)(ae.Z,{name:"claim",style:{minWidth:200},variant:"primary",onClick:function(t){return e.claimRewardPressed()},children:"Claim rewards"})}),r&&(0,ce.jsx)(he.Z,{onClose:function(t){return e.hideUpdateStakeModalPreseed()},children:(0,ce.jsx)(pe,{formType:n,handleSuccess:function(t){return e.handleSuccess(t)},handleError:function(t,r){return e.handleError(t,r)},allowanceUpdated:function(){return e.handleAllowanceUpdated()},balance:"stake"==n?this.state.lpUnstaked:"unstake"==n?this.state.lpStaked:0})})]})]})}}]),r}(p.Component);function Ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,i.Z)(this,r)}}var ke=function(e){(0,o.Z)(r,e);var t=Ze(r);function r(e){var s;return(0,a.Z)(this,r),s=t.call(this,e),(0,u.Z)((0,c.Z)(s),"stakeUpdated",(0,n.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.headerRef.current.reload();case 2:return e.next=4,s.reload();case 4:case"end":return e.stop()}}),e)})))),(0,u.Z)((0,c.Z)(s),"setAccountConnected",(function(e){s.setState({accountConnected:e})})),(0,u.Z)((0,c.Z)(s),"handleSuccess",(function(e){s.headerRef.current.reload(),s.reload(),s.setState({info:{title:"Success!",detail:e}})})),(0,u.Z)((0,c.Z)(s),"handleError",(function(e,t){t?s.setState({error:t}):e&&e.message?s.setState({error:e.message}):s.setState({error:"An error occurred (".concat(e,")")})})),s.state={accountConnected:!1,currentRewardPeriod:void 0},s.headerRef=p.createRef(),s}return(0,s.Z)(r,[{key:"componentDidMount",value:function(){this.reload()}},{key:"reload",value:function(){this.loadBalances()}},{key:"loadBalances",value:function(){var e=(0,n.Z)(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,R.M$)().then((function(e){if(t.setState({currentRewardPeriod:e}),e)return k()})).then((function(e){return t.setState({lpStaked:e}),(0,S.sb)()})).then((function(e){return t.setState({lpUnstaked:e.units}),P()})).then((function(e){console.log(">>> info: ",e),t.setState(e)})).catch((function(e){t.setState({error:e.message})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleAllowanceUpdated",value:function(){var e=(0,n.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(">>> handleAllowanceUpdated() -- TODO");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;console.log(">>>> render",this.state);var t=this.state,r=t.accountConnected,n=t.lpUnstaked,a=t.lpStaked,s=t.claimableRewards,c=t.rewardsPaid,o=t.rewardRate,i=t.totalRewardsPaid;return r?(0,ce.jsxs)(g.T3,{children:[(0,ce.jsx)(N.Z,{ref:this.headerRef,reload:function(){return e.reload()},setAccountConnected:function(t){return e.setAccountConnected(t)}}),(0,ce.jsx)("div",{className:"w-100 divisor",children:" "}),(0,ce.jsx)("h1",{className:"text-center-top",children:"BIGPP LP STAKING"}),(0,ce.jsxs)(g.M5,{children:[this.state.error&&(0,ce.jsxs)(A.a,{variant:"danger",title:"Error",children:[" ",this.state.error," "]}),this.state.info&&(0,ce.jsx)(A.a,{variant:"info",title:this.state.info.title,children:this.state.info.detail}),!this.state.currentRewardPeriod&&(0,ce.jsx)(h.Z,{variant:"info",children:" No Active Reward Period. "}),this.state.currentRewardPeriod&&(0,ce.jsx)(we,{lpUnstaked:n,lpStaked:a,claimableRewards:s,rewardsPaid:c,rewardRate:o,totalRewardsPaid:i,handleSuccess:function(t){return e.handleSuccess(t)},handleError:function(t,r){return e.handleError(t,r)},allowanceUpdated:function(){return e.handleAllowanceUpdated()},rewardPeriod:this.state.currentRewardPeriod})]})]}):(0,ce.jsxs)(g.T3,{children:[(0,ce.jsx)(N.Z,{ref:this.headerRef,reload:function(){return e.reload()},setAccountConnected:function(t){return e.setAccountConnected(t)}}),(0,ce.jsx)(g.M5,{children:(0,ce.jsx)(h.Z,{variant:"info",title:"No Ethereum account connected",style:{textAlign:"center"},children:"Please connect an Ethereum account to use the dapp!"})})]})}}]),r}(p.Component)},62610:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(70857)}])}},function(e){e.O(0,[774,912,33,53,309,888,179],(function(){return t=62610,e(e.s=t);var t}));var t=e.O();_N_E=t}]);